#ClusterRole 

apiVersion: rbac.authorization.k8s.io/v1 
kind: ClusterRole 
metadata: 
  name: jenkins-cluster-role 
rules: 
  - apiGroups: [""]
    resources: ["pods", "services", "endpoints"]
    verbs: ["get", "list", "create", "delete"]

--- 

apiVersion: rbac.authorization.k8s.io/v1 
kind: ClusterRoleBinding 
metadata: 
  name: jenkins-role-binding 
subjects: 
  - kind: ServiceAccount 
    name: jenkins-sa 
    namespace: jenkins 
    apiGroup: ""
roleRef: 
  kind: ClusterRole 
  name: jenkins-cluster-role 
  apiGroup: rbac.authorization.k8s.io 


--- 

apiVersion: v1 
kind: Secret 
metadata: 
  name: jenkins-secret 
  namespace: jenkins 
  annotations: 
    kubernetes.io/service-account.name: jenkins-sa 
type: kubernetes.io/service-account.name 

--- 

# curl -k -H "Authorization: Bearer <token>"  https://10.71.59.168:6443/api/v1/pods/





